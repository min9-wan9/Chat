<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’¬ Chat App - Modern Messenger</title>
    <link rel="stylesheet" href="/styles.css">
</head>

<body>
<div class="container">

    <!-- ========== ROOM SIDEBAR ========== -->
    <div class="sidebar" id="roomSidebar">
        <div class="sidebar-header">
            <h3>ğŸ  PhÃ²ng Chat</h3>
            <div class="sidebar-subtitle">Danh sÃ¡ch cÃ¡c phÃ²ng</div>
        </div>
        <div class="sidebar-content" id="roomList">
            <button class="new-room-btn btn-full" onclick="createNewRoom()">â• Táº¡o phÃ²ng má»›i</button>
        </div>
    </div>

    <!-- ========== USER SIDEBAR ========== -->
    <div class="sidebar" id="userSidebar" style="display:none">
        <div class="sidebar-header">
            <h3>ğŸ‘¥ ThÃ nh viÃªn</h3>
            <div class="sidebar-subtitle" id="userCount">0 ngÆ°á»i online</div>
        </div>
        <div class="sidebar-content" id="userList"></div>
    </div>

    <!-- ========== MAIN CONTENT ========== -->
    <div class="main-content">

        <!-- HEADER -->
        <div class="header">
            <div class="header-left">
                <button class="toggle-sidebar-btn" onclick="toggleSidebar()">â˜°</button>
                <div>
                    <h1 id="currentRoomName">ğŸ’¬ Chat App</h1>
                    <div class="status">
                        <span class="status-dot"></span>
                        <span id="statusText">Äang káº¿t ná»‘i...</span>
                    </div>
                </div>
            </div>

            <div class="header-right">
                <div class="user-current">
                    <span class="user-avatar">ğŸ‘¤</span>
                    <span id="currentUserName"></span>
                </div>

                <button class="header-btn" onclick="toggleUserSidebar()">ğŸ‘¥ ThÃ nh viÃªn</button>
                <button class="header-btn logout" onclick="logout()">ğŸšª ÄÄƒng xuáº¥t</button>
            </div>
        </div>

        <!-- JOIN ROOM -->
        <div class="join-section" id="joinSection">
            <div class="join-box">
                <h2 style="text-align:center;color:#667eea;margin-bottom:30px">Tham gia Chat</h2>
                <div class="input-group">
                    <label>ğŸ  TÃªn phÃ²ng</label>
                    <input type="text" id="room" value="General">
                </div>
                <button class="btn-full" onclick="join()">ğŸš€ VÃ o phÃ²ng chat</button>
            </div>
        </div>

        <!-- CHAT AREA -->
        <div class="chat-area" id="chatArea" style="display:none"></div>

        <div class="typing-indicator" id="typingIndicator"></div>

        <!-- INPUT AREA (CHAT THÆ¯á»œNG) -->
        <div class="input-area" id="inputArea" style="display:none">
            <div class="input-wrapper">
                <input type="text" id="message"
                       placeholder="Nháº­p tin nháº¯n..."
                       onkeypress="handleEnter(event)"
                       oninput="handleTyping()">

                <!-- EMOJI -->
                <button type="button" class="emoji-btn" onclick="toggleEmojiPanel()">ğŸ˜„</button>

                <div class="emoji-panel" id="emojiPanel">
                    <span onclick="insertEmoji('ğŸ˜‚')">ğŸ˜‚</span>
                    <span onclick="insertEmoji('ğŸ˜­')">ğŸ˜­</span>
                    <span onclick="insertEmoji('ğŸ˜')">ğŸ˜</span>
                    <span onclick="insertEmoji('ğŸ˜¡')">ğŸ˜¡</span>
                    <span onclick="insertEmoji('ğŸ‘')">ğŸ‘</span>
                    <span onclick="insertEmoji('ğŸ”¥')">ğŸ”¥</span>
                    <span onclick="insertEmoji('ğŸ‰')">ğŸ‰</span>
                    <span onclick="insertEmoji('ğŸ’¯')">ğŸ’¯</span>
                </div>

                <label for="fileInput" class="file-upload-btn">ğŸ“</label>
                <input type="file" id="fileInput" style="display:none"
                       onchange="handleFileSelect(event)">
            </div>
            <button class="send-btn" onclick="send()">ğŸ“¤ Gá»­i</button>
        </div>

        <!-- PRIVATE CHAT -->
        <div class="private-chat-overlay" id="privateChatOverlay">
            <div class="private-chat-header">
                <div class="private-chat-title" id="privateChatTitle">ğŸ’¬ Chat riÃªng</div>
                <button class="close-private-btn" onclick="closePrivateChat()">âœ•</button>
            </div>

            <div class="chat-area" id="privateChatArea"></div>

            <div class="input-area">
                <input type="text" id="privateMessage"
                       placeholder="Nháº­p tin nháº¯n riÃªng..."
                       onkeypress="handlePrivateEnter(event)">
                <button class="send-btn" onclick="sendPrivate()">ğŸ“¤ Gá»­i</button>
            </div>
        </div>

    </div>
</div>

<script src="app.js"></script>

<!-- EMOJI SCRIPT (KHÃ”NG Äá»˜NG Tá»šI LOGIC CÅ¨) -->
<script>
function toggleEmojiPanel() {
    const panel = document.getElementById("emojiPanel");
    panel.style.display = panel.style.display === "block" ? "none" : "block";
}

function insertEmoji(emoji) {
    const input = document.getElementById("message");
    input.value += emoji;
    input.focus();
}
</script>

</body>
</html>
